(function(t){function e(e){for(var n,i,r=e[0],l=e[1],c=e[2],m=0,p=[];m<r.length;m++)i=r[m],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&p.push(s[i][0]),s[i]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);d&&d(e);while(p.length)p.shift()();return o.push.apply(o,c||[]),a()}function a(){for(var t,e=0;e<o.length;e++){for(var a=o[e],n=!0,r=1;r<a.length;r++){var l=a[r];0!==s[l]&&(n=!1)}n&&(o.splice(e--,1),t=i(i.s=a[0]))}return t}var n={},s={app:0},o=[];function i(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=n,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(a,n,function(e){return t[e]}.bind(null,n));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var d=l;o.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";var n=a("85ec"),s=a.n(n);s.a},"269f":function(t,e,a){"use strict";var n=a("89fc"),s=a.n(n);s.a},"3b77":function(t,e,a){"use strict";var n=a("b040"),s=a.n(n);s.a},"4a76":function(t,e,a){"use strict";var n=a("72b7"),s=a.n(n);s.a},"56d7":function(t,e,a){"use strict";a.r(e);var n=a("2b0e"),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("navBar"),a("router-view")],1)},o=[],i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"boardList"},[t._v(" [ "),t._l(t.boards,(function(e,n){return a("span",{key:n},[n+1<t.boards.length?a("span",[a("span",{staticClass:"link",on:{click:function(a){return t.goBoard(e.name)}}},[t._v(" "+t._s(e.name)+" ")]),t._v(" / ")]):a("span",[a("span",{staticClass:"link",on:{click:function(a){return t.goBoard(e.name)}}},[t._v(" "+t._s(e.name)+" ")])])])})),t._v(" ] "),t._m(0)],2)},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"navTopRight"},[t._v(" [ "),a("a",{staticClass:"boards",attrs:{href:"#"}},[t._v(" Home ")]),t._v(" ] ")])}],l={name:"navBar",data(){return{boards:[{name:"a",title:"Anime and Cartoons"},{name:"b",title:"Random"}]}},methods:{goBoard(t){this.$router.push({path:`/${t}/catalog`,params:{board:t}})}}},c=l,d=(a("3b77"),a("2877")),m=Object(d["a"])(c,i,r,!1,null,null,null),p=m.exports,u={name:"App",components:{navBar:p}},h=u,g=(a("034f"),Object(d["a"])(h,s,o,!1,null,null,null)),v=g.exports,b=a("8c4f"),f=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",[a("banner"),a("div",{staticClass:"boardTitle"},[t._v(" /"+t._s(t.board)+"/ - "+t._s(t.boardInfo[t.board])+" ")]),a("hr",{staticClass:"abovePostLine"}),t.threadPrompt?t._e():a("div",{staticClass:"togglePostFormLink"},[t._v(" [ "),a("span",{staticClass:"startThread",on:{click:t.openThread}},[t._v("Start a New Thread")]),t._v(" ] ")]),t.threadPrompt?a("div",[a("div",{staticClass:"row mt-2 justify-content-center"},[a("span",{staticClass:"mr-2 thread-label",attrs:{for:"uploadTitle"}},[t._v("Title")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],staticClass:"col-5",attrs:{type:"text",id:"uploadTitle"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}})]),a("div",{staticClass:"row mt-2 mb-2 justify-content-center"},[a("span",{staticClass:"mr-2 thread-label"},[t._v("Description")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],staticClass:"col-5",attrs:{type:"text",rows:"8",cols:"48",wrap:"soft",tabindex:"4"},domProps:{value:t.content},on:{input:function(e){e.target.composing||(t.content=e.target.value)}}})]),a("div",{staticClass:"row justify-content-center"},[a("span",{staticClass:"mr-2 thread-label"},[t._v("File")]),a("div",{staticClass:"col-3"},[a("input",{attrs:{type:"file",id:"uploadImage"},on:{change:t.onFileSelected}})]),a("div",{staticClass:"col-2 text-center"},[a("button",{attrs:{type:"submit"},on:{click:t.onUpload}},[t._v("Post")])])])]):t._e(),a("hr",{staticClass:"belowPostLine"})],1),a("div",{staticClass:"center"},[a("div",{staticClass:"threadsList extended-small"},t._l(t.threadList,(function(e,n){return a("div",{key:n,staticClass:"thread"},[a("img",{staticClass:"thumb",attrs:{width:e.image.size.width,height:e.image.size.height,src:e.image.path},on:{click:function(a){return t.enterThread(t.board,e.postNumber)}}}),t._m(0,!0),a("div",{staticClass:"teaser"},[a("b",[t._v(t._s(e.title))]),t._v(": "+t._s(e.content)+" ")])])})),0)])])},_=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"meta"},[t._v("R: "),a("b",[t._v("0")]),t._v(" / I: "),a("b",[t._v("0")])])}],C=a("bc3a"),y=a.n(C),w=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},x=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"text-center"},[a("img",{attrs:{src:"http://localhost:3000/image/4bran.jpg"}})])}],k={name:"banner"},N=k,T=Object(d["a"])(N,w,x,!1,null,null,null),P=T.exports,j={name:"catalogPage",props:["board"],components:{banner:P},data(){return{boardInfo:{a:"Anime and Manga",b:"Random"},threadPrompt:!1,title:"",content:"",image:void 0,threadList:[]}},watch:{board(){this.loadBoard()}},methods:{enterThread(t,e){this.$router.push({path:`/${t}/thread/${e}`,params:{params:{board:t,threadNumber:e}}})},openThread(){this.threadPrompt=!0},onFileSelected(t){console.log(t.target.files[0]),this.image=t.target.files[0]},async onUpload(){const t=new FormData;t.append("image",this.image,this.image.name),t.append("title",this.title),t.append("content",this.content),t.append("board",this.board),console.log(t),await y.a.post("/api/thread",t).then(t=>{console.log(t),location.reload()})},async loadBoard(){console.log("triggerd");let t=await y.a.get(`/api/board/${this.board}`);200===t.status&&(this.threadList=t.data.threads,this.threadList.forEach(t=>{"http://localhost:8080"===window.location.origin?t.image.path=`http://localhost:3000/${t.image.path}`:t.image.path=`${window.location.origin}/${t.image.path}`,console.log(t.image)}))}},mounted(){this.loadBoard()}},E=j,I=(a("269f"),Object(d["a"])(E,f,_,!1,null,null,null)),O=I.exports,D=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",[a("banner"),a("div",{staticClass:"boardTitle"},[t._v(" /"+t._s(t.board)+"/ - "+t._s(t.boardInfo[t.board])+" ")]),a("hr",{staticClass:"abovePostLine"})],1),a("div",{staticClass:"togglePostFormLink"},[t._v(" [ "),a("span",{staticClass:"startThread",on:{click:function(e){return t.emitGlobalClickEvent()}}},[t._v("Post a Reply")]),t._v(" ] ")]),a("threadComponent",{attrs:{threadNumber:t.threadNumber,board:t.board}}),a("reply-box",{ref:"replyBox",attrs:{threadNumber:t.thread.postNumber,board:t.board}})],1)},B=[];const L=new n["a"];var R=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container pt-5"},[t._m(0),a("div",[a("div",{staticClass:"collapse",attrs:{id:"formContainer"}},[a("div",{staticClass:"row mt-2 justify-content-center"},[a("span",{staticClass:"mr-2 thread-label",attrs:{for:"uploadTitle"}},[t._v("Title")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],staticClass:"col-5",attrs:{type:"text",id:"uploadTitle"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}})]),a("div",{staticClass:"row mt-2 mb-2 justify-content-center"},[a("span",{staticClass:"mr-2 thread-label"},[t._v("Description")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],staticClass:"col-5",attrs:{type:"text",rows:"",id:"uploadContent"},domProps:{value:t.content},on:{input:function(e){e.target.composing||(t.content=e.target.value)}}})]),a("div",{staticClass:"row justify-content-center"},[a("span",{staticClass:"mr-2 thread-label"},[t._v("File")]),a("div",{staticClass:"col-3"},[a("input",{attrs:{type:"file",id:"uploadImage"},on:{change:t.onFileSelected}})]),a("div",{staticClass:"col-2"},[a("button",{staticClass:"ml-auto",attrs:{type:"submit"},on:{click:t.onUpload}},[t._v("Post")])])])])])])},F=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"d-flex justify-content-center"},[a("button",{attrs:{id:"newThread",type:"button","data-target":"#formContainer","data-toggle":"collapse","aria-expanded":"false","aria-controls":"formContainer"}},[t._v("[ New Thread ]")])])}],q={name:"originalPost",data(){return{image:void 0,open:!0,title:"",content:""}},methods:{onFileSelected(t){console.log(t.target.files[0]),this.image=t.target.files[0]},async onUpload(){const t=new FormData;t.append("image",this.image,this.image.name),t.append("title",this.title),t.append("content",this.content),console.log(t),await y.a.post("/api/upload",t).then(t=>{console.log(t),location.reload()})},disableButton(){console.log("disabled"),document.getElementById("newThread").disabled=!0},async getThread(){await y.a.get("/api/thread").then(t=>{void 0!==t.data.image&&this.disableButton()})}},mounted(){this.getThread()}},A=q,S=(a("4a76"),Object(d["a"])(A,R,F,!1,null,"52b65af4",null)),z=(S.exports,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"content"},[a("div",[void 0!==t.thread.content?a("div",{staticClass:"opContainer"},[a("div",{staticClass:"titleContainer"},[a("div",{staticClass:"threadTitle subject"},[t._v(" "+t._s(t.thread.title)+" ")]),a("div",{staticClass:"threadTitle"},[t._v("File: "),a("a",{attrs:{href:t.thread.image.path}},[t._v("Image URL ("+t._s(t.thread.image.size.nWidth)+"x"+t._s(t.thread.image.size.nHeight)+")")]),a("div",{staticClass:"threadTitle anonymous"},[t._v(" Anonymous ")]),a("button",{staticClass:"threadTitle postNumber ml-2",on:{click:function(e){return t.emitGlobalClickEvent()}}},[t._v(" No. "+t._s(t.thread.postNumber)+" ")])])]),a("div",{staticClass:"imageContainer"},[a("imageComponent",{attrs:{image:t.thread.image}})],1),a("div",{staticClass:"threadContent postMessage"},[t._v(" "+t._s(t.thread.content)+" ")]),t._l(t.thread.replies,(function(t,e){return a("div",{key:e,staticClass:"threadReplies"},[a("replyComponent",{attrs:{replyData:t}})],1)}))],2):a("div")])])])}),H=[],M=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("img",{attrs:{width:t.newImage.width,height:t.newImage.height,src:t.image.path},on:{click:t.expandImage}})])},G=[],U={name:"imageComponent",props:["image"],data(){return{newImage:{width:0,height:0},expanded:!1}},methods:{expandImage(){this.expanded?(this.newImage.width=this.image.size.pWidth,this.newImage.height=this.image.size.pHeight,this.expanded=!1):(this.newImage.width=this.image.size.nWidth,this.newImage.height=this.image.size.nHeight,this.expanded=!0)}},created(){this.newImage.height=this.image.size.height,this.newImage.width=this.image.size.width}},W=U,V=Object(d["a"])(W,M,G,!1,null,null,null),J=V.exports,X=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"sideArrows"},[t._v(">>")]),a("div",{staticClass:"reply post",attrs:{id:t.replyData.postNumber}},[a("div",{staticClass:"postInfo"},[a("span",{staticClass:"anonymous"},[t._v(" Anonymous ")]),void 0!==t.replyData.image?a("span",[t._v("File: "),a("a",{attrs:{href:t.replyData.image.path}},[t._v("Image URL ("+t._s(t.replyData.image.size.nWidth)+"x"+t._s(t.replyData.image.size.nHeight)+")")])]):t._e(),a("span",{staticClass:"postNumber ml-2",on:{click:function(e){return t.emitGlobalClickEvent(t.replyData.postNumber)}}},[t._v("No."+t._s(t.replyData.postNumber))])]),a("div",{staticClass:"postMessage"},[t.replyData.image?a("imageComponent",{staticClass:"imageMessage",attrs:{image:t.replyData.image}}):t._e(),a("span",{domProps:{innerHTML:t._s(t.parseContent(t.replyData.comment))}})],1)])])},K=[],Q={name:"replyComponent",props:["replyData"],components:{imageComponent:J},methods:{emitGlobalClickEvent(){L.$emit("thread-number-clicked",this.replyData.postNumber)},parseContent(t){let e="";console.log(t),e=t.replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll("\n","<br>").replaceAll(/&gt;&gt;[0-9]{1,9}/g,t=>(console.log(`<button class="quoteLink">${t}</button>`),`<button class="quoteLink" id="${t.substr(2)}">${t}</button>`)).replace(/\[spoiler\].*\[\/spoiler\]/g,t=>(t=t.replace("[spoiler]",""),t=t.replace("[/spoiler]",""),console.log(t),`<s>${t}</s>`));let a=[];return e=e.split("<br>"),e.forEach(t=>{console.log(t),console.log("Split?",t.split("&gt;")),2===t.split("&gt;").length&&t.startsWith("&gt;")?(t=`<span class="quote">${t}</span><br>`,a.push(t)):a.push(`${t}<br>`)}),a=a.join("\n"),a},scrollToPost(t){let e=document.getElementById(t);e.scrollIntoView()}},mounted(){var t=document.getElementsByClassName("quoteLink");for(let e=0;e<t.length;e++)t[e].addEventListener("click",()=>{console.log("Clicked ",this.scrollToPost(t[e].id))})}},Y=Q,Z=(a("db12"),Object(d["a"])(Y,X,K,!1,null,null,null)),tt=Z.exports,et={name:"threadComponent",props:["threadNumber","board"],data(){return{image:void 0,isFetching:!0,webm:!1,thread:{}}},methods:{async getThread(){console.log("HAHAHA",this.board,this.threadNumber);let t=await y.a.get("/api/thread",{params:{threadNumber:this.threadNumber,board:this.board}});200===t.status&&(this.thread=t.data,console.log(this.thread))},emitGlobalClickEvent(){L.$emit("thread-number-clicked",this.thread.postNumber)}},created(){this.getThread()},components:{imageComponent:J,replyComponent:tt}},at=et,nt=(a("9af0"),Object(d["a"])(at,z,H,!1,null,null,null)),st=nt.exports,ot=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.open?a("div",{staticClass:"extPanel reply d-none",attrs:{id:"quickReply"}},[a("div",{staticClass:"drag postblock",attrs:{id:"qrHeader"}},[t._v("Reply to Thread No."),a("span",{attrs:{id:"qrTid"}},[t._v(t._s(t.threadNumber))]),a("img",{staticClass:"extButton",attrs:{alt:"X",src:"http://localhost:3000/image/cross.png",id:"qrClose",title:"Close Window"},on:{click:function(e){return t.hide()}}})]),a("div",{attrs:{id:"qrForm"}},[a("div",[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.comment,expression:"comment"}],attrs:{name:"com",cols:"48",rows:"4",wrap:"soft",tabindex:"0",placeholder:"Comment"},domProps:{value:t.comment},on:{input:function(e){e.target.composing||(t.comment=e.target.value)}}})]),a("div",[a("form",{attrs:{enctype:"multipart/form-data"}},[a("input",{attrs:{type:"file",id:"uploadReplyImage"},on:{change:t.onFileSelected}}),a("button",{staticClass:"ml-auto",attrs:{type:"submit"},on:{click:function(e){return t.sendReply()}}},[t._v("Submit")])])])]),a("div",{attrs:{id:"qrError"}})]):t._e()},it=[],rt={name:"replyBox",props:["threadNumber","board"],data(){return{image:void 0,comment:"",open:!0}},methods:{makeDraggable(){const t=$("#quickReply");t.draggable()},toggleVisibility(){const t=$("#quickReply");t.hasClass("d-none")?t.removeClass("d-none"):t.addClass("d-none")},makeVisible(){const t=$("#quickReply");t.hasClass("d-none")&&t.removeClass("d-none")},hide(){this.comment="";const t=$("#quickReply");t.hasClass("d-none")||t.addClass("d-none")},addComment(t){this.comment=this.comment.concat(`>>${t} \n`)},onFileSelected(t){console.log(t.target.files[0]),this.image=t.target.files[0]},async sendReply(){const t=new FormData;void 0!==this.image&&t.append("image",this.image,this.image.name),t.append("comment",this.comment),t.append("board",this.board),t.append("threadNumber",this.threadNumber);let e=await y.a.post("/api/thread/reply",t);200===e.status&&window.location.reload()}},mounted(){this.makeDraggable(),console.log("board",this.board),L.$on("thread-number-clicked",t=>{this.makeVisible(),void 0!==t&&this.addComment(t)})}},lt=rt,ct=(a("a1fe"),Object(d["a"])(lt,ot,it,!1,null,null,null)),dt=ct.exports,mt={name:"threadPage",components:{threadComponent:st,replyBox:dt,banner:P},data(){return{boardInfo:{a:"Anime and Manga",b:"Random"},thread:{}}},props:["board","threadNumber"],methods:{async getThread(){let t=await y.a.get("/api/thread",{params:{threadNumber:this.threadNumber,board:this.board}});200===t.status&&(this.thread=t.data,console.log(this.thread))},emitGlobalClickEvent(t){console.log("triggrd"),L.$emit("thread-number-clicked")}},created(){this.getThread()}},pt=mt,ut=(a("7f77"),Object(d["a"])(pt,D,B,!1,null,null,null)),ht=ut.exports;n["a"].use(b["a"]);const gt=[{path:"/:board/catalog",component:O,name:"catalogPage",props:!0},{path:"/:board/thread/:threadNumber",component:ht,name:"threadPage",props:!0}],vt=new b["a"]({routes:gt});var bt=vt;n["a"].config.productionTip=!1,new n["a"]({router:bt,render:function(t){return t(v)}}).$mount("#app")},"72b7":function(t,e,a){},"7f77":function(t,e,a){"use strict";var n=a("e316"),s=a.n(n);s.a},"85ec":function(t,e,a){},"89fc":function(t,e,a){},"9af0":function(t,e,a){"use strict";var n=a("c1a1"),s=a.n(n);s.a},a1fe:function(t,e,a){"use strict";var n=a("ea5e"),s=a.n(n);s.a},b040:function(t,e,a){},b5ea:function(t,e,a){},c1a1:function(t,e,a){},db12:function(t,e,a){"use strict";var n=a("b5ea"),s=a.n(n);s.a},e316:function(t,e,a){},ea5e:function(t,e,a){}});
//# sourceMappingURL=app.340f59e0.js.map